
{% extends "agendamentos/base_publica.html" %}
{% load static %}

{% block content %}
<!-- Loader -->
<div id="site-loader" style="background:#fff;position:fixed;z-index:9999;inset:0;display:flex;align-items:center;justify-content:center;transition:.4s;flex-direction:column;">
  <img src="{% static 'agendamentos/img/submarca.png' %}" alt="BellCilios" style="height:85px;filter:drop-shadow(0 0 24px #e8d1a3);animation:loaderpulse 1.2s infinite;">
  <div style="margin-top:1.2rem;color:#a67c00;font-weight:600;letter-spacing:2px;font-size:1.05rem">Carregando beleza...</div>
</div>
<style>
@keyframes loaderpulse{0%{transform:scale(1);filter:drop-shadow(0 0 0 #e8d1a3)}50%{transform:scale(1.08);filter:drop-shadow(0 0 14px #a67c00)}100%{transform:scale(1);filter:drop-shadow(0 0 0 #e8d1a3)}}
</style>
<script>
document.addEventListener("DOMContentLoaded",function(){
  setTimeout(()=>{
    const l=document.getElementById('site-loader');
    if(l){l.style.opacity='0';setTimeout(()=>l.style.display='none',450);}
    const vid=document.querySelector('.hero-video video');
    if(vid){ vid.play().catch(()=>{}); }
  },900);
});
</script>

<!-- SCOPED -->
<div id="home-page">
  <style>
    /* ===== HERO ===== */
    #home-page .hero{
      position:relative; min-height:78vh; display:grid; place-items:center; text-align:center;
      color:#fff; overflow:hidden;
    }
    #home-page .hero .hero-video{
      position:absolute; inset:0; z-index:0; overflow:hidden;
    }
    #home-page .hero .hero-video video{
      width:100%; height:100%; object-fit:cover; object-position:center;
      filter:brightness(.75) saturate(105%);
    }
    #home-page .hero::after{
      content:""; position:absolute; inset:0; z-index:1;
      background:
        radial-gradient(1200px 600px at 50% 22%, rgba(0,0,0,.15), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.15) 0%, rgba(0,0,0,.35) 100%);
    }
    #home-page .hero .hero-content{ position:relative; z-index:2; }
    #home-page .hero h1{
      font-family: "Playfair Display", ui-serif, Georgia, serif;
      font-size: clamp(2.2rem, 5vw, 3.6rem); font-weight:800; letter-spacing:.5px;
      text-shadow: 0 2px 14px rgba(0,0,0,.35); color:#f8e9bf; margin-bottom:.75rem;
    }
    #home-page .hero p.lead{
      font-size: clamp(1.05rem, 2.3vw, 1.25rem); color:#fff; text-shadow:0 1px 10px rgba(0,0,0,.30);
    }
    #home-page .hero .cta{
      display:inline-flex; align-items:center; gap:.5rem; margin-top:1.1rem;
      padding:.7rem 1.25rem; border:1px solid rgba(255,255,255,.55); color:#fff;
      border-radius:999px; backdrop-filter:blur(2px);
      box-shadow:0 8px 22px rgba(0,0,0,.12), inset 0 0 0 999px rgba(255,255,255,.06);
      transition:transform .18s, box-shadow .18s, border-color .18s;
    }
    #home-page .hero .cta:hover{ transform:translateY(-1px); box-shadow:0 10px 26px rgba(0,0,0,.18); border-color:#fff }
    #home-page .hero-curve{position:absolute;left:0;right:0;bottom:-1px;line-height:0;z-index:2}
    #home-page .hero-curve svg{display:block;width:calc(100% + 1px);height:110px}
    #home-page .hero-curve .fill-next{fill:#fdfaff}

    /* Controles do vídeo */
    .video-controls{
      position:absolute; right:14px; bottom:14px; z-index:3;
      display:flex; gap:8px;
    }
    .video-controls .vc-btn{
      display:inline-flex; align-items:center; justify-content:center;
      width:42px; height:42px; border-radius:999px; border:1px solid rgba(255,255,255,.7);
      color:#fff; background:rgba(0,0,0,.25);
      backdrop-filter: blur(2px);
      cursor:pointer; transition:transform .15s, background .15s, border-color .15s;
    }
    .video-controls .vc-btn:hover{ transform:scale(1.05); background:rgba(0,0,0,.35); border-color:#fff; }
    .video-controls .vc-btn i{ font-size:18px; line-height:1; }
    .video-controls .vc-label{ position:absolute; right:0; bottom:52px; font-size:.8rem; background:rgba(0,0,0,.5); color:#fff; padding:.25rem .5rem; border-radius:6px; opacity:0; transform:translateY(6px); transition:.15s; pointer-events:none }
    .video-controls:hover .vc-label{ opacity:1; transform:translateY(0) }

    /* ===== CARDS HOME ===== */
    #home-page .services-showcase-section{ padding:3.25rem 0 4rem }
    #home-page .service-card{
      border-radius:28px; border:none; overflow:hidden; min-height:470px;
      display:flex; flex-direction:column;
      box-shadow:0 10px 30px rgba(170,140,30,0.10);
      background:#fff; transition: transform .25s ease, box-shadow .25s ease;
    }
    #home-page .service-card:hover{ transform: translateY(-6px); box-shadow:0 14px 38px rgba(170,140,30,.16) }

    #home-page .media-wrap{ height:310px; background:#fafafa; display:flex; align-items:center; justify-content:center; }
    #home-page .media-wrap img{ width:100%; height:100%; object-fit:contain; display:block; }

    #home-page .card-body{ padding:1rem 1.1rem 1.35rem }
    #home-page .card-title{ color:#a38916; font-weight:700; font-size:1.18rem }

    @media (max-width: 991px){
      #home-page .hero{ min-height:66vh }
      #home-page .hero-curve svg{ height:80px }
    }
  </style>

  <!-- HERO -->
  <header class="hero">
    <!-- BACKGROUND VIDEO -->
    <div class="hero-video">
      <video id="heroVideo" autoplay muted loop playsinline preload="metadata"
             poster="{% static 'agendamentos/img/hero_poster.jpg' %}">
        <source src="{% static 'agendamentos/video/hero.mp4' %}" type="video/mp4">
        Seu navegador não suporta vídeo em HTML5.
      </video>
    </div>

    <!-- CONTROLES -->
    <div class="video-controls" aria-label="Controles do vídeo">
      <button class="vc-btn" id="btnPlayPause" type="button" aria-label="Pausar vídeo">
        <i class="bi bi-pause-fill"></i>
      </button>
      <button class="vc-btn" id="btnMute" type="button" aria-label="Ativar som">
        <i class="bi bi-volume-mute-fill"></i>
      </button>
      <span class="vc-label" id="vcStatus" aria-hidden="true"></span>
    </div>

    <!-- CONTEÚDO -->
    <div class="hero-content">
      <div class="container position-relative">
        <h1>Beleza começa pelo olhar</h1>
        <p class="lead">Design de Cílios e Formação Profissional para você se destacar.<br>Sinta-se linda, poderosa e confiante!</p>
        <a class="cta" target="_blank"
           href="https://wa.me/5571991806312?text=Ol%C3%A1%2C%20gostaria%20de%20agendar%20um%20hor%C3%A1rio%20com%20a%20BellCilios%21">
          <i class="bi bi-whatsapp"></i> Agende pelo WhatsApp
        </a>
      </div>
    </div>

    <div class="hero-curve">
      <svg viewBox="0 0 1200 120" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39
                 -57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8
                 C1132.19,118.92,1055.71,111.31,985.66,92.83Z" class="fill-next"></path>
      </svg>
    </div>
  </header>

  <!-- SEÇÃO SERVIÇOS -->
  <section class="services-showcase-section">
    <div class="container">
      <div class="row g-4 justify-content-center">

        <!-- Card 1: Design de Cílios -->
        <div class="col-lg-5 col-md-6">
          <div class="card service-card">
            <div class="media-wrap">
              <img src="{% static 'agendamentos/img/design_sobrancelha_1.png' %}" alt="Design de Cílios">
            </div>
            <div class="card-body">
              <h5 class="card-title">Design de Cílios</h5>
              <p class="card-text">Cílios personalizados e harmonia perfeita para valorizar seu olhar.</p>
            </div>
          </div>
        </div>

        <!-- Card 2: Cursos -->
        <div class="col-lg-5 col-md-6">
          <div class="card service-card">
            <div class="media-wrap">
              <img src="{% static 'agendamentos/img/WhatsApp Image 2025-07-08 at 18.30.04.jpeg' %}" alt="Cursos">
            </div>
            <div class="card-body">
              <h5 class="card-title">Cursos Profissionais</h5>
              <p class="card-text">Cursos práticos, certificados e voltados para o sucesso na beleza.</p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>
</div>

<!-- Controles JS do vídeo -->
<script>
(function(){
  const vid  = document.getElementById('heroVideo');
  const bPP  = document.getElementById('btnPlayPause');
  const bM   = document.getElementById('btnMute');
  const lab  = document.getElementById('vcStatus');

  function setLabel(text){
    if(!lab) return;
    lab.textContent = text || '';
    lab.style.opacity = 1;
    clearTimeout(setLabel._t);
    setLabel._t = setTimeout(()=> lab.style.opacity = 0, 1200);
  }

  function refreshIcons(){
    if(!vid) return;
    // Play/Pause icon
    bPP.innerHTML = vid.paused ? '<i class="bi bi-play-fill"></i>' : '<i class="bi bi-pause-fill"></i>';
    bPP.setAttribute('aria-label', vid.paused ? 'Reproduzir vídeo' : 'Pausar vídeo');
    // Mute icon
    bM.innerHTML = vid.muted ? '<i class="bi bi-volume-mute-fill"></i>' : '<i class="bi bi-volume-up-fill"></i>';
    bM.setAttribute('aria-label', vid.muted ? 'Ativar som' : 'Silenciar');
  }

  if(bPP){
    bPP.addEventListener('click', async ()=>{
      try{
        if(vid.paused){ await vid.play(); setLabel('Reproduzindo'); }
        else { vid.pause(); setLabel('Pausado'); }
      }catch(e){}
      refreshIcons();
    });
  }
  if(bM){
    bM.addEventListener('click', async ()=>{
      try{
        vid.muted = !vid.muted;
        // alguns browsers exigem gesto do usuário para iniciar áudio
        if(!vid.muted && vid.paused){ await vid.play().catch(()=>{}); }
        setLabel(vid.muted ? 'Som desativado' : 'Som ativado');
      }catch(e){}
      refreshIcons();
    });
  }

  // estado inicial
  refreshIcons();
})();
</script>
{% endblock %}
```
